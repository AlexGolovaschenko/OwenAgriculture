product_detail.html
{% extends 'base.html' %}
{% load django_bootstrap_breadcrumbs %}

{% block breadcrumbs %}
    {{ block.super }}
    {% breadcrumb "Главная" "/" %}
	
	{% if catalog == 'pigsty' %}
    	{% breadcrumb "Свиноводство" "products:pigsty_catalog" %}
    {% elif catalog == 'poultry' %}
    	{% breadcrumb "Птицеводство" "products:poultry_catalog" %}
    {% else %}
    	{% breadcrumb "Каталог" "products:full_catalog" %}
    {% endif %}

    {% breadcrumb product.model "products:product_detail" product.id  %}
{% endblock %}

{% block title %} Owen Agriculture - {{product.model}} {% endblock %}

{% block content %}
	<div class="w3-container"> 
		<div class="row">
			<!-- side bar -->
			<div class="col-3 my-light-grey h-100 p-0">
			<nav class="sidebar w3-bar-block my-light-grey mt-3" style="width:285px;">
				<a href="#top" style="text-decoration: none;">
					<div class="w3-display-container w3-margin-top" style="height: 200px; margin-bottom: 0px;">
						<img src="{{product.image.url}}" alt="{{product.name}}" class="w3-display-middle" style="max-width: 100%; max-height: 100%">
					</div>
					<h4 class="w3-center w3-large text-dark" style="margin: 0;"><b>{{product.model}}</b></h4>
				</a>

				<div class="p-3">
				{% for s in spec %}
					<a href="#paragraph-{{forloop.counter}}" class="w3-bar-item w3-border-bottom my-light-grey w3-hover-teal w3-small p-1 pt-2" style="text-decoration: none;">{{s.header}}</a>
				{% endfor %}
				</div>
			</nav>				
			</div>

			<!-- product description -->
			<div class="col-9" >
				<div id="top" class="anchor" style="top: -130px;"></div>
				<h2 class="w3-border-bottom">{{product.name}}</h2>

				<div class="w3-display-container" style="height: 300px;">
					<img src="{{product.image.url}}" alt="{{product.name}}" class="w3-display-middle" style="max-width: 90%; max-height: 90%">
				</div>

				{% for s in spec %}
					<div id="paragraph-{{forloop.counter}}" class="anchor"></div>
					<div class="w3-panel w3-light-grey w3-large w3-padding">{{s.header}}</div>
					<div class="w3-margin-left">
						<p class="w3-large">{{s.specification|safe}}</p>
					</div>
				{% endfor %}
					
			</div>
		</div>
	</div>
	<br>
{% endblock %}



{% block product_detail_script %}
<script>
	$(function(){
	    $(window).scroll(function() {
	        if($(this).scrollTop() >= 35) {
	            $('nav.sidebar').addClass('stickytop');
	        }
	        else{
	            $('nav.sidebar').removeClass('stickytop');
	        } 

	        var scrollBottom = $(document).height() - $(window).scrollTop();
	        var offset = '60px';
	        var headerHeight = 765;
	        if (scrollBottom <= headerHeight) {
	        	offset = (scrollBottom - headerHeight).toString() + 'px';
	        } 
	        $('nav.sidebar').css('top',  offset);
	    });
	});
</script>
{% endblock %}